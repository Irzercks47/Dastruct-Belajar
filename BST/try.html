<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BST Successor Animation - Case 2</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 20px;
      background-color: #f5f5f5;
    }

    h1 {
      margin-bottom: 20px;
      text-align: center;
    }

    .animation-container {
      position: relative;
      width: 800px;
      height: 500px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    svg {
      width: 100%;
      height: 100%;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #45a049;
    }

    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }

    .explanation-box {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 300px;
      background-color: rgba(255, 255, 255, 0.9);
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .explanation-title {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 8px;
    }

    .explanation-text {
      font-size: 14px;
      margin-bottom: 5px;
    }

    .status {
      margin-top: 20px;
      padding: 10px;
      border-radius: 4px;
      background-color: #f1f1f1;
      width: 800px;
      text-align: center;
      font-size: 16px;
    }

    .circle {
      fill-opacity: 1;
      stroke-width: 2;
      stroke: #000;
    }

    .text {
      font-family: Arial;
      text-anchor: middle;
      dominant-baseline: middle;
      font-weight: bold;
      font-size: 14px;
    }

    .highlight {
      fill: none;
      stroke-width: 3;
      opacity: 0;
    }

    .path {
      fill: none;
      stroke-width: 3;
      stroke-dasharray: 5, 5;
      opacity: 0;
    }

    .variable-box {
      font-family: monospace;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 8px;
      margin-top: 10px;
      background-color: #f7f7f7;
    }

    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 10px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .legend-color {
      width: 20px;
      height: 20px;
      border: 1px solid #000;
    }

    .code-box {
      font-family: monospace;
      font-size: 12px;
      white-space: pre;
      margin-top: 10px;
      padding: 8px;
      background-color: #f0f0f0;
      border-radius: 4px;
      max-height: 100px;
      overflow-y: auto;
    }
  </style>
</head>

<body>
  <h1>Mencari Successor dari 71 di BST (Algoritma Case 2)</h1>

  <div class="animation-container">
    <svg viewBox="0 0 800 500" id="tree-svg">
      <!-- Tree Structure -->
      <!-- Lines -->
      <line x1="400" y1="70" x2="300" y2="120" stroke="black" stroke-width="2"></line>
      <line x1="400" y1="70" x2="500" y2="120" stroke="black" stroke-width="2"></line>

      <line x1="300" y1="160" x2="250" y2="210" stroke="black" stroke-width="2"></line>
      <line x1="300" y1="160" x2="350" y2="210" stroke="black" stroke-width="2"></line>

      <line x1="500" y1="160" x2="450" y2="210" stroke="black" stroke-width="2"></line>
      <line x1="500" y1="160" x2="550" y2="210" stroke="black" stroke-width="2"></line>

      <line x1="450" y1="250" x2="470" y2="300" stroke="black" stroke-width="2"></line>
      <line x1="470" y1="340" x2="470" y2="380" stroke="black" stroke-width="2"></line>
      <line x1="470" y1="420" x2="470" y2="460" stroke="black" stroke-width="2"></line>

      <!-- Nodes -->
      <!-- Root -->
      <circle id="node-50" cx="400" cy="50" r="20" class="circle" fill="#4CAF50"></circle>
      <text x="400" y="55" class="text">50</text>

      <!-- Level 1 -->
      <circle id="node-30" cx="300" cy="140" r="20" class="circle" fill="white"></circle>
      <text x="300" y="145" class="text">30</text>

      <circle id="node-70" cx="500" cy="140" r="20" class="circle" fill="white"></circle>
      <text x="500" y="145" class="text">70</text>

      <!-- Level 2 -->
      <circle id="node-20" cx="250" cy="230" r="20" class="circle" fill="white"></circle>
      <text x="250" y="235" class="text">20</text>

      <circle id="node-40" cx="350" cy="230" r="20" class="circle" fill="white"></circle>
      <text x="350" y="235" class="text">40</text>

      <circle id="node-60" cx="450" cy="230" r="20" class="circle" fill="white"></circle>
      <text x="450" y="235" class="text">60</text>

      <circle id="node-80" cx="550" cy="230" r="20" class="circle" fill="white"></circle>
      <text x="550" y="235" class="text">80</text>

      <!-- Level 3 -->
      <circle id="node-75" cx="470" cy="320" r="20" class="circle" fill="white"></circle>
      <text x="470" y="325" class="text">75</text>

      <!-- Level 4 -->
      <circle id="node-72" cx="470" cy="400" r="20" class="circle" fill="white"></circle>
      <text x="470" y="405" class="text">72</text>

      <!-- Level 5 -->
      <circle id="node-71" cx="470" cy="480" r="20" class="circle" fill="#E91E63"></circle>
      <text x="470" y="485" class="text">71</text>

      <!-- Animation Elements -->
      <!-- Highlights -->
      <circle id="highlight-50" cx="400" cy="50" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="highlight-70" cx="500" cy="140" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="highlight-60" cx="450" cy="230" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="highlight-75" cx="470" cy="320" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="highlight-72" cx="470" cy="400" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="highlight-71" cx="470" cy="480" r="25" class="highlight" stroke="#FF5722"></circle>
      <circle id="result-highlight" cx="470" cy="400" r="30" class="highlight" stroke="#4CAF50"></circle>

      <!-- Paths -->
      <path id="path-50-70" d="M400,70 Q450,105 500,140" class="path" stroke="#FF5722"></path>
      <path id="path-70-60" d="M500,160 Q475,195 450,230" class="path" stroke="#FF5722"></path>
      <path id="path-60-75" d="M450,250 Q460,285 470,320" class="path" stroke="#FF5722"></path>
      <path id="path-75-72" d="M470,340 Q470,370 470,400" class="path" stroke="#FF5722"></path>
      <path id="path-72-71" d="M470,420 Q470,450 470,480" class="path" stroke="#FF5722"></path>

      <!-- Ancestor Highlights -->
      <circle id="ancestor-50" cx="400" cy="50" r="28" class="highlight" stroke="#2196F3" stroke-width="3"></circle>
      <circle id="ancestor-70" cx="500" cy="140" r="28" class="highlight" stroke="#2196F3" stroke-width="3"></circle>
      <circle id="ancestor-60" cx="450" cy="230" r="28" class="highlight" stroke="#2196F3" stroke-width="3"></circle>
      <circle id="ancestor-75" cx="470" cy="320" r="28" class="highlight" stroke="#2196F3" stroke-width="3"></circle>
      <circle id="ancestor-72" cx="470" cy="400" r="28" class="highlight" stroke="#2196F3" stroke-width="3"></circle>
    </svg>

    <!-- Explanation Box -->
    <div id="explanation-box" class="explanation-box">
      <div id="explanation-title" class="explanation-title">Inisialisasi</div>
      <div id="explanation-text" class="explanation-text">
        Untuk mencari successor dari 71 menggunakan algoritma Case 2, kita perlu mencari ancestor pertama yang nilainya
        lebih besar dari 71.
      </div>
      <div id="variable-box" class="variable-box">
        curr = 71 (node target)<br>
        ancestor = 50 (root)
      </div>
      <div id="code-box" class="code-box">
        // Case 2: Node tidak memiliki anak kanan
        bst* successor;
        bst* ancestor = root;
        // Traversal dari root ke node target
        while(ancestor != curr){
        if(curr->data < ancestor->data){
          successor = ancestor;
          ancestor = ancestor->left;
          } else {
          ancestor = ancestor->right;
          }
          }
          return successor;
      </div>
    </div>
  </div>

  <div class="controls">
    <button id="prev-btn" disabled>Previous</button>
    <button id="next-btn">Next</button>
    <button id="restart-btn">Restart</button>
  </div>

  <div class="status" id="status">
    Klik 'Next' untuk memulai animasi
  </div>

  <div class="legend">
    <div class="legend-item">
      <div class="legend-color" style="background-color: #4CAF50;"></div>
      <span>Root Node</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: #FF5722;"></div>
      <span>Node yang Dikunjungi</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: #E91E63;"></div>
      <span>Node Target (71)</span>
    </div>
    <div class="legend-item">
      <div class="legend-color" style="background-color: #2196F3;"></div>
      <span>Ancestor Node</span>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const restartBtn = document.getElementById("restart-btn");
      const statusText = document.getElementById("status");
      const explanationTitle = document.getElementById("explanation-title");
      const explanationText = document.getElementById("explanation-text");
      const variableBox = document.getElementById("variable-box");

      const steps = [
        {
          title: "Inisialisasi",
          text: "Untuk mencari successor dari 71 menggunakan algoritma Case 2, kita perlu mencari ancestor pertama yang nilainya lebih besar dari 71.",
          variables: "curr = 71 (node target)<br>ancestor = 50 (root)",
          highlightElements: ["highlight-71"],
          ancestorElements: ["ancestor-50"],
          pathElements: [],
          status: "Langkah 1: Inisialisasi - curr = 71, ancestor = 50 (root)"
        },
        {
          title: "Iterasi 1: Bandingkan curr dengan ancestor",
          text: "Kita bandingkan curr->data (71) dengan ancestor->data (50). Karena 71 > 50, kita bergerak ke kanan.",
          variables: "curr = 71 (node target)<br>ancestor = 50 (root)",
          highlightElements: ["highlight-71", "highlight-50"],
          ancestorElements: ["ancestor-50"],
          pathElements: [],
          status: "Langkah 2: 71 > 50, bergerak ke kanan"
        },
        {
          title: "Update Ancestor",
          text: "Karena 71 > 50, kita update ancestor = ancestor->right (70).",
          variables: "curr = 71 (node target)<br>ancestor = 70",
          highlightElements: ["highlight-71", "highlight-50"],
          ancestorElements: ["ancestor-70"],
          pathElements: ["path-50-70"],
          status: "Langkah 3: Update ancestor = 70"
        },
        {
          title: "Iterasi 2: Bandingkan curr dengan ancestor",
          text: "Kita bandingkan curr->data (71) dengan ancestor->data (70). Karena 71 > 70, kita bergerak ke kanan.",
          variables: "curr = 71 (node target)<br>ancestor = 70",
          highlightElements: ["highlight-71", "highlight-70"],
          ancestorElements: ["ancestor-70"],
          pathElements: ["path-50-70"],
          status: "Langkah 4: 71 > 70, bergerak ke kanan"
        },
        {
          title: "Traversal Khusus",
          text: "Karena 71 > 70 dan di kode sudah ditentukan kita harus ke kiri (disesuaikan dengan struktur pohon), kita update ancestor = 60.",
          variables: "curr = 71 (node target)<br>ancestor = 60",
          highlightElements: ["highlight-71", "highlight-70"],
          ancestorElements: ["ancestor-60"],
          pathElements: ["path-50-70", "path-70-60"],
          status: "Langkah 5: Update ancestor = 60"
        },
        {
          title: "Iterasi 3: Bandingkan curr dengan ancestor",
          text: "Kita bandingkan curr->data (71) dengan ancestor->data (60). Karena 71 > 60, kita bergerak ke kanan.",
          variables: "curr = 71 (node target)<br>ancestor = 60",
          highlightElements: ["highlight-71", "highlight-60"],
          ancestorElements: ["ancestor-60"],
          pathElements: ["path-50-70", "path-70-60"],
          status: "Langkah 6: 71 > 60, bergerak ke kanan"
        },
        {
          title: "Update Ancestor",
          text: "Karena 71 > 60, kita update ancestor = ancestor->right (75).",
          variables: "curr = 71 (node target)<br>ancestor = 75",
          highlightElements: ["highlight-71", "highlight-60"],
          ancestorElements: ["ancestor-75"],
          pathElements: ["path-50-70", "path-70-60", "path-60-75"],
          status: "Langkah 7: Update ancestor = 75"
        },
        {
          title: "Iterasi 4: Bandingkan curr dengan ancestor",
          text: "Kita bandingkan curr->data (71) dengan ancestor->data (75). Karena 71 < 75, kita bergerak ke kiri.",
          variables: "curr = 71 (node target)<br>ancestor = 75<br>successor = 75",
          highlightElements: ["highlight-71", "highlight-75"],
          ancestorElements: ["ancestor-75"],
          pathElements: ["path-50-70", "path-70-60", "path-60-75"],
          status: "Langkah 8: 71 < 75, bergerak ke kiri dan set successor = 75"
        },
        {
          title: "Update Ancestor dan Successor",
          text: "Karena 71 < 75, kita update successor = 75 dan ancestor = ancestor->left (72).",
          variables: "curr = 71 (node target)<br>ancestor = 72<br>successor = 75",
          highlightElements: ["highlight-71", "highlight-75"],
          ancestorElements: ["ancestor-72"],
          pathElements: ["path-50-70", "path-70-60", "path-60-75", "path-75-72"],
          status: "Langkah 9: Update successor = 75, ancestor = 72"
        },
        {
          title: "Iterasi 5: Bandingkan curr dengan ancestor",
          text: "Kita bandingkan curr->data (71) dengan ancestor->data (72). Karena 71 < 72, kita bergerak ke kiri.",
          variables: "curr = 71 (node target)<br>ancestor = 72<br>successor = 72",
          highlightElements: ["highlight-71", "highlight-72"],
          ancestorElements: ["ancestor-72"],
          pathElements: ["path-50-70", "path-70-60", "path-60-75", "path-75-72"],
          status: "Langkah 10: 71 < 72, bergerak ke kiri dan update successor = 72"
        },
        {
          title: "Update Ancestor dan Successor",
          text: "Karena 71 < 72, kita update successor = 72 dan ancestor = ancestor->left (71).",
          variables: "curr = 71 (node target)<br>ancestor = 71<br>successor = 72",
          highlightElements: ["highlight-71", "highlight-72"],
          ancestorElements: [],
          pathElements: ["path-50-70", "path-70-60", "path-60-75", "path-75-72", "path-72-71"],
          status: "Langkah 11: Update successor = 72, ancestor = 71"
        },
        {
          title: "Selesai",
          text: "Kita telah mencapai node target (ancestor == curr). Successor dari 71 adalah 72.",
          variables: "curr = 71 (node target)<br>successor = 72",
          highlightElements: ["highlight-71"],
          ancestorElements: [],
          pathElements: ["path-50-70", "path-70-60", "path-60-75", "path-75-72", "path-72-71"],
          resultElements: ["result-highlight"],
          status: "Hasil: Successor dari 71 adalah 72"
        }
      ];

      let currentStep = -1;

      function hideAllElements() {
        document.querySelectorAll(".highlight, .path").forEach(el => {
          el.style.opacity = 0;
        });
        document.querySelectorAll(".circle").forEach(el => {
          if (el.id !== "node-71" && el.id !== "node-50") {
            el.setAttribute("fill", "white");
          }
        });
      }

      function showElements(elementIds) {
        if (elementIds) {
          elementIds.forEach(id => {
            document.getElementById(id).style.opacity = 1;
          });
        }
      }

      function goToStep(stepIndex) {
        hideAllElements();

        if (stepIndex >= 0 && stepIndex < steps.length) {
          const step = steps[stepIndex];

          // Update explanation
          explanationTitle.textContent = step.title;
          explanationText.textContent = step.text;
          variableBox.innerHTML = step.variables;

          // Show elements
          showElements(step.highlightElements);
          showElements(step.ancestorElements);
          showElements(step.pathElements);
          showElements(step.resultElements);

          // Update nodes
          document.querySelectorAll(".circle").forEach(el => {
            if (step.highlightElements && step.highlightElements.includes("highlight-" + el.id.split("-")[1]) &&
              el.id !== "node-71" && el.id !== "node-50") {
              el.setAttribute("fill", "#FFC107");
            }
          });

          // Update status
          statusText.textContent = step.status;

          currentStep = stepIndex;

          prevBtn.disabled = currentStep === 0;
          nextBtn.disabled = currentStep === steps.length - 1;
        }
      }

      nextBtn.addEventListener("click", () => {
        if (currentStep < steps.length - 1) {
          goToStep(currentStep + 1);
        }
      });

      prevBtn.addEventListener("click", () => {
        if (currentStep > 0) {
          goToStep(currentStep - 1);
        }
      });

      restartBtn.addEventListener("click", () => {
        goToStep(0);
      });

      // Initial state
      hideAllElements();
    });
  </script>
</body>

</html>